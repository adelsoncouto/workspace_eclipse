<?php

require_once "model/Animal.php";
require_once "model/Categoria.php";

class MainController
{
	public function __construct()
	{
		if(empty($_SESSION['categoria']))
		{
			//ambiente
			$agua  = new Categoria('Água');
			$terra = new Categoria('Terra');
			
			//primeros animais
			$tubarao = new Animal(0, 'tubarao', null);
			$macaco = new Animal(0, 'macaco', null);
			
			$terra->addFilho($macaco);
			$agua->addFilho($tubarao);
			
			//agrupador
			$categorias = [serialize($agua), serialize($terra)];
			
			//armazenamento
			$_SESSION['categoria'] = $categorias;
			
			//historico
			$_SESSION['historico'] = array(0,0);
		}
		
	}

	public function init()
	{
		require_once "view/inicio.php";
	}
	
	public function start()
	{
		$_SESSION['pai'] = $_SESSION['categoria'][0];
		
		$pai = unserialize($_SESSION['pai']);
		
		$_SESSION['eu'] = serialize($pai->getFilhos()[0]);
		
		$_REQUEST['msg'] = $pai->getPergunta();
		
		require_once "view/pergunta.php";
	}
	
	public function pergunta()
	{
		$eu = null;
		
		
		$_REQUEST['msg'] = 'o';
		require_once "view/pergunta.php";
	}
	
}