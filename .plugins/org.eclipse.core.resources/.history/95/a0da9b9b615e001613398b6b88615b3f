<!DOCTYPE html>
<html data-ng-app="app" data-ng-controller="appController">
    <head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="{{descricao}}" />
		<meta name="keywords" content="{{palavraSChave}}" />
		<meta name="author" content="Adelson Silva Couto" />
		<link rel="shortcut icon" href="img/favicon.png" />
		<title>Global Management</title> 

		<style type="text/css">
			.selectize-control > .selectize-dropdown {
				top: 35px;
			}
		</style>
		
		
		<!-- JQUERY -->
		<script type="text/javascript" src="lib/jquery/jquery-2.1.4.min.js"></script>

		<!--[if lt IE 9]>
				<script src="lib/html5/html5shiv.min.js"></script>
				<script src="lib/html5/respond.min.js"></script>
			<![endif]-->

		<!-- BOOTSTRAP -->
		<link rel="stylesheet" href="lib/bootstrap-3.3.4/css/bootstrap.min.css">
		<script type="text/javascript" src="lib/bootstrap-3.3.4/js/bootstrap.min.js"></script>
		
		<script type="text;javascript" src="js/ajuda.js"></script>
		
		<!-- highcharts -->
		<script type="text/javascript" src="lib/hchart/js/highcharts.js"></script>
		<script type="text/javascript" src="lib/hchart/js/highcharts-more.js"></script>
		<script type="text/javascript" src="lib/hchart/js/modules/exporting.js"></script>
		
		<!-- SELECT 2 ANGULAR -->
		<link rel="stylesheet" href="lib/ui-select-master/dist/select.min.css">

		<!-- ANGULAR --> 
		<script type="text/javascript" src="lib/angular-1.4.2/angular.min.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/i18n/angular-locale_pt-br.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/angular-route.min.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/angular-cookies.min.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/angular-animate.min.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/angular-sanitize.min.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/ui-bootstrap-tpls-1.3.3.min.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/angular-base64-upload.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/mask.min.js"></script>
		<script type="text/javascript" src="lib/angular-1.4.2/ui-utils-masks.js"></script>
		<script type="text/javascript" src="lib/ui-select-master/dist/select.min.js"></script>
		<script type="text/javascript" src="lib/highcharts-ng-master/dist/highcharts-ng.min.js"></script>

        <!-- ANGULAR DATATABLES PLUGIN -->
        <script type="text/javascript" src="lib/angular-datatables/plugins/jquery-datatable/js/jquery.dataTables.min.js"></script>
        <script type="text/javascript" src="lib/angular-datatables/angular-datatables.min.js"></script>
        <link rel="stylesheet" href="lib/angular-datatables/css/angular-datatables.css">
		
		<script type="text/javascript" src="lib/angular-tree-control-master/angular-tree-control.js"></script>
		<!-- link for CSS when using the tree as a Dom element -->
		<link rel="stylesheet" type="text/css" href="lib/angular-tree-control-master/css/tree-control.css">
		<!-- link for CSS when using the tree as an attribute -->
		<link rel="stylesheet" type="text/css" href="lib/angular-tree-control-master/css/tree-control-attribute.css">
		
		<!-- IMPORTES DE NGPROGRESS -->		
		<script src="lib/ngprogress/ngprogress.min.js"></script>
		<link rel="stylesheet" href="lib/ngprogress/ngProgress.css">
		<!-- CSS -->
		<link rel="stylesheet" href="css/tela.css">
		<link rel="stylesheet" href="css/geral.responsive.css">
		<link rel="stylesheet" href="css/geral.css">
		<link rel="stylesheet" href="css/breadcrumb.css">
		
		
		<!-- FLAT-ICONS -->
		<link rel="stylesheet" href="lib/flat_icons/flaticon.css">

		<!-- JS -->
		<script type="text/javascript" src="js/util.js"></script>
		<script type="text/javascript" src="js/negocio.js"></script>
		<script type="text/javascript" src="js/tela.js"></script>
		<script type="text/javascript" src="js/entidade.js"></script>
		<script type="text/javascript" src="js/rotas.php"></script>
        <style>
			.popover{
				z-index:9999999;
			}
			.btn-info.active{background:#5bc0de;}
		</style>
    </head>
    
    <body >
		
		<div style="z-index: 99991; bottom:0px; right: 0px; position: fixed; font-size: 10px">3.2.5</div>
		
        <div class="login" data-ng-show="!usuario.chave" data-ng-include="'view/_template_login.html'"></div>
		
		<div id="imprimir"></div>
		
		<div class="principal-div" data-ng-show="usuario.chave" id="main">
			<nav class="navbar navbar-default navbar-fixed-top" style="padding-right: 10px;">
				<div class="container-fluid">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="#"><img src="img/logo.png"></a>
					</div>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav"><!-- data-target=".navbar-collapse" -->
							<li data-ng-repeat="(key,value) in menu" ><a href="" data-toggle="collapse" data-ng-click="createBreadcum(value.rotulo, ''); ativarSubMenu($index, 0)"  > {{value.rotulo}} </a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right"> <!-- data-target=".navbar-collapse" -->
							<li data-ng-click="verNota()">
								<a href="" data-toggle="collapse" title="Mensagem" style="width:100%; height: 100%; display: block; text-align:center;">
									<span class="glyphicon glyphicon-envelope"></span>
									<span class="badge" style="position:absolute; top:5px; left:25px; font-size:10px">{{notas.length}}</span>
								</a>
							</li>
							
							<li>
								<a href="" onclick="ajudaGeral()" data-toggle="collapse" style=" font-size:20px;width:100%; height: 100%; display: block; text-align:center;">
									<span class="glyphicon glyphicon-question-sign" title="Ajuda interativa"></span>
								</a>
							</li>
							
							<li>
								<a href="/tmp/manual.pdf" onclick="window.open('/tmp/manual.pdf')" target="_blank" data-toggle="collapse" style=" font-size:20px;width:100%; height: 100%; display: block; text-align:center;">
									<span class="glyphicon glyphicon-education" title="Manual"></span>
								</a>
							</li>
							
							<li data-ng-click="sair()"><a href="" data-toggle="collapse" title="Sair" data-target=".navbar-collapse"><span class="glyphicon glyphicon-off" style="margin-right: 8px;"></span> Sair </a></li>
						</ul>
					</div>
				</div>
			</nav>
        
			<div class="menu-vertical-principal" data-ng-class="!menuVertical ? 'addEfect' : 'addEfect'">
				<div class="menu-vertical">
					<span class="icone-menu" data-ng-click="expandirMenu()"></span>
					<nav data-ng-include="!menuVertical ? 'view/_template_menu_extendido.html' : 'view/_template_menu_curto.html'"></nav>
				</div>
			</div>
			
			<div class="container-full" data-ng-class="'addEfect'">
				<div class="meio">
					<div class="breadcrumb flat">
						<a href class="active"><span class="glyphicon glyphicon-home"></span></a>
						<a href data-ng-repeat="bread in caminho">{{bread}}</a>
					</div>
					<div id="normal">
						<div id="view" data-ng-view></div>
					</div>
			</div>
			</div>

		</div>
		<div class="modal fade" data-backdrop="static" id="alertaModal" tabindex="-1" style="z-index:99991" role="dialog" aria-labelledby="myLargeModalLabel">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel"></h4>
					</div>
					<div class="modal-body">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" data-backdrop="static" id="modal_nota" tabindex="-1" style="z-index:99991" role="dialog" aria-labelledby="myLargeModalLabel">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Nota</h4>
					</div>
					<div class="modal-body">
						<table class="table">
							<thead>
								<tr>
									<th>Remetente</th>
									<th>Data</th>
									<th>Assunto</th>
									<th>Mensagem</th>
								</tr>
							</thead>
							<tbody>
								<tr data-ng-repeat="n in notas">
									<td>{{n.remetenteNome}}</td>
									<td>{{n.data}}</td>
									<td>{{n.assunto}}</td>
									<td>{{n.texto}}</td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
					</div>
				</div>
			</div>
		</div>

		<script>
		
			function paginacao(aQtdDePagina, aFnCallBack){
				var _root = this;
				this.ativo = {id:1, inicio: 0};
				this.pages = [];
				
				this.exec = function(aIndex){
					_root.ativo = _root.pages[aIndex];
					aFnCallBack(_root.ativo);
				}
				this.a = function(){
					for(var i = 0; i < aQtdDePagina; i++){
						var id = i+1;
						var ini = i * 20;
						_root.pages.push({id:id, inicio: ini});
					}
				}
			}
		
			function alertaError(aMensagem){
				if($(".login").css("display") == "block" && aMensagem == "Usuário não logado, clique em sair e faça o login novamente."){
					return;
				}
				
				$("#alertaModal .modal-header").removeClass("label-danger");
				$("#alertaModal .modal-header").removeClass("label-success");
				$("#alertaModal .modal-header").removeClass("label-warning");
				$("#alertaModal .modal-header").addClass("label-danger");
				$("#alertaModal .modal-title").html("Erro");
				$("#alertaModal .modal-body").html(aMensagem);
				$("#alertaModal").modal("show");
			}
			function alertaSuccess(aMensagem){
				$("#alertaModal .modal-header").removeClass("label-danger");
				$("#alertaModal .modal-header").removeClass("label-success");
				$("#alertaModal .modal-header").removeClass("label-warning");
				$("#alertaModal .modal-header").addClass("label-success");
				$("#alertaModal .modal-title").html("Sucesso");
				$("#alertaModal .modal-body").html(aMensagem);
				$("#alertaModal").modal("show");
			}
			function alertaAtencao(aMensagem){
				$("#alertaModal .modal-header").removeClass("label-danger");
				$("#alertaModal .modal-header").removeClass("label-success");
				$("#alertaModal .modal-header").removeClass("label-warning");
				$("#alertaModal .modal-header").addClass("label-warning");
				$("#alertaModal .modal-title").html("Atenção");
				$("#alertaModal .modal-body").html(aMensagem);
				$("#alertaModal").modal("show");
			}
			
			//Alteração para teste
			
			var index_proximaAjuda = -1;
			var index_ultimaAjuda = 65;
			var bug = "";
			
			function atualizarAjuda(){
				index_proximaAjuda = -1;
				ajuda();
			}
			
			function ajudaGeral(){
				if(index_proximaAjuda >= 0){
					index_proximaAjuda = -1;
				}else{
					index_proximaAjuda = 0;
				}
				ajuda();
			}
			function ajuda() {
				
				//cancelar ajuda
				if(index_proximaAjuda < 0){
					$('[data-toggle="popover"]').each(function(index, value){
						$(this).popover('destroy');
					});
					return false;
				}
				
				var _exibiu = false;
				
				//exibir ajuda
				$('[data-toggle="popover"]').each(function(aIndex, aValue){
					
					//verifica se tem algum pai oculto
					var _exibe = true;
					
					
					if($(this).attr("data-show") == index_proximaAjuda){
						$(this).parents().each(function(ind, val){
							if($(this).css("display") == "none"){
								_exibe = false;
							}
						});					
					}else{
						_exibe = false;
					}
					
					
					
					//se não tem pai oculto compara o data-show com proxima ajuda
					if(_exibe){
						$(this).popover("show");
						_exibiu = true;
					}else{
						$(this).popover('destroy');//popover("hide");
					}
				});
				
				if(!_exibiu){
					incrementaAjuda();
				}else {
					$(".popover-content").unbind( "click" );
					$(".popover-content").click(function(){
						index_proximaAjuda += 1;
						ajuda();
					});
					$(".popover-content").css("cursor","pointer");
					$(".popover-content").append(" <span class='glyphicon glyphicon-menu-right'></span>");
				}
			}
			
			function incrementaAjuda(){
				if(index_proximaAjuda < index_ultimaAjuda){
					index_proximaAjuda += 1;
					ajuda();
				}else{
					ajudaGeral();
				}
			}
			
			function Tela() {
			    var _root = this;
			    this.ativa = '';
			    this.ativar = function (aTela) {
			        _root.ativa = aTela;
			    };
			}

			function dataDatePicker(){
				var _root = this;
				this.hoje = new Date();
				
				this.today = function() {
					_root.hoje = new Date();
				};
				
				this.clear = function() {
				    _root.hoje = null;
				};

				 this.inlineOptions = {
					 customClass: _root.getDayClass,
					 minDate: new Date(),
					 showWeeks: false
				  };

				 this.dateOptions = {
				    dateDisabled: function disabled(data) {
					    var date = data.date,
					    mode = data.mode;
						return mode === 'day' && (date.getDay() === -1 || date.getDay() === 9);
					},
				    formatYear: 'yy',
				    maxDate: new Date(2090, 12, 31),
				    minDate: new Date(),
				    startingDay: 0
				  };

				  

				  this.toggleMin = function() {
				    _root.inlineOptions.minDate = _root.inlineOptions.minDate ? null : new Date();
				    _root.dateOptions.minDate = _root.inlineOptions.minDate;
				  };

				  this.toggleMin();

				  this.open = function() {
				    _root.popup.opened = true;
				  };

				  this.setDate = function(year, month, day) {
				    _root.hoje = new Date(year, month, day);
				  };
				  
				  this.format = 'dd/MMMM/yyyy';
				  this.altInputFormats = ['d!/M!/yyyy'];

				  this.popup = {
				    opened: false
				  };

				  this.tomorrow = new Date();
				  _root.tomorrow.setDate(_root.tomorrow.getDate() + 1);

				  this.afterTomorrow = new Date();
				  _root.afterTomorrow.setDate(_root.tomorrow.getDate() + 1);
				  
				  this.events = [
				    {
				      date: _root.tomorrow,
				      status: 'full'
				    },
				    {
				      date: _root.afterTomorrow,
				      status: 'partially'
				    }
				  ];

				  this.getDayClass = function(data) {
				    var date = data.date,
				      mode = data.mode;
				    if (mode === 'day') {
				      var dayToCheck = new Date(date).setHours(0,0,0,0);

				      for (var i = 0; i < _root.events.length; i++) {
				        var currentDay = new Date(_root.events[i].date).setHours(0,0,0,0);

				        if (dayToCheck === currentDay) {
				          return _root.events[i].status;
				        }
				      }
				    }
				    return '';
				  }
			}
			
			var telaCheia = false;
			function imprimir(aId){
				var view;
				if(telaCheia){
					$(".full").removeClass("glyphicon glyphicon-resize-small");
					$(".full").addClass("glyphicon glyphicon-resize-full");
					telaCheia = false;
					view = $("#view").detach();
					$("#normal").empty();
					$("#normal").prepend(view);
					$("#imprimir").fadeOut();					
					$("#main").fadeIn();
				}else{
					$(".full").removeClass("glyphicon glyphicon-resize-full");
					$(".full").addClass("glyphicon glyphicon-resize-small");
					telaCheia = true;
					view = $("#view").detach();
					$("#imprimir").empty();
					$("#imprimir").prepend(view);
					$("#main").fadeOut();
					$("#imprimir").fadeIn();
				}
			}
		</script>
		<script type="text/javascript" src="js/app.js"></script>
		<script type="text/javascript" src="js/controller/appController.js"></script>
		<script type="text/javascript" src="js/controller/colaboradorController2.js"></script>
		<script type="text/javascript" src="js/service/api.js"></script>
    </body>
</html>